var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useOnramp=useOnramp;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _NativeOnrampSdkModule=_interopRequireDefault(require("../specs/NativeOnrampSdkModule"));var _react=require("react");var _events=require("../events");var onCheckoutClientSecretRequestedSubscription=null;function useOnramp(){var _configure=(0,_react.useCallback)(function(){var _ref=(0,_asyncToGenerator2.default)(function*(config){return _NativeOnrampSdkModule.default.configureOnramp(config);});return function(_x){return _ref.apply(this,arguments);};}(),[]);var _hasLinkAccount=(0,_react.useCallback)(function(){var _ref2=(0,_asyncToGenerator2.default)(function*(email){return _NativeOnrampSdkModule.default.hasLinkAccount(email);});return function(_x2){return _ref2.apply(this,arguments);};}(),[]);var _registerLinkUser=(0,_react.useCallback)(function(){var _ref3=(0,_asyncToGenerator2.default)(function*(info){return _NativeOnrampSdkModule.default.registerLinkUser(info);});return function(_x3){return _ref3.apply(this,arguments);};}(),[]);var _registerWalletAddress=(0,_react.useCallback)(function(){var _ref4=(0,_asyncToGenerator2.default)(function*(walletAddress,network){return _NativeOnrampSdkModule.default.registerWalletAddress(walletAddress,network);});return function(_x4,_x5){return _ref4.apply(this,arguments);};}(),[]);var _attachKycInfo=(0,_react.useCallback)(function(){var _ref5=(0,_asyncToGenerator2.default)(function*(kycInfo){return _NativeOnrampSdkModule.default.attachKycInfo(kycInfo);});return function(_x6){return _ref5.apply(this,arguments);};}(),[]);var _presentKycInfoVerification=(0,_react.useCallback)(function(){var _ref6=(0,_asyncToGenerator2.default)(function*(updatedAddress){return _NativeOnrampSdkModule.default.presentKycInfoVerification(updatedAddress);});return function(_x7){return _ref6.apply(this,arguments);};}(),[]);var _authenticateUserWithToken=(0,_react.useCallback)(function(){var _ref7=(0,_asyncToGenerator2.default)(function*(linkAuthTokenClientSecret){return _NativeOnrampSdkModule.default.authenticateUserWithToken(linkAuthTokenClientSecret);});return function(_x8){return _ref7.apply(this,arguments);};}(),[]);var _updatePhoneNumber=(0,_react.useCallback)(function(){var _ref8=(0,_asyncToGenerator2.default)(function*(phone){return _NativeOnrampSdkModule.default.updatePhoneNumber(phone);});return function(_x9){return _ref8.apply(this,arguments);};}(),[]);var _authenticateUser=(0,_react.useCallback)((0,_asyncToGenerator2.default)(function*(){return _NativeOnrampSdkModule.default.authenticateUser();}),[]);var _verifyIdentity=(0,_react.useCallback)((0,_asyncToGenerator2.default)(function*(){return _NativeOnrampSdkModule.default.verifyIdentity();}),[]);var _collectPaymentMethod=(0,_react.useCallback)(function(){var _ref1=(0,_asyncToGenerator2.default)(function*(paymentMethod,platformPayParams){return _NativeOnrampSdkModule.default.collectPaymentMethod(paymentMethod,platformPayParams!=null?platformPayParams:{});});return function(_x0,_x1){return _ref1.apply(this,arguments);};}(),[]);var _createCryptoPaymentToken=(0,_react.useCallback)((0,_asyncToGenerator2.default)(function*(){return _NativeOnrampSdkModule.default.createCryptoPaymentToken();}),[]);var _performCheckout=(0,_react.useCallback)(function(){var _ref11=(0,_asyncToGenerator2.default)(function*(onrampSessionId,provideCheckoutClientSecret){var _onCheckoutClientSecr;(_onCheckoutClientSecr=onCheckoutClientSecretRequestedSubscription)==null||_onCheckoutClientSecr.remove();onCheckoutClientSecretRequestedSubscription=(0,_events.addOnrampListener)('onCheckoutClientSecretRequested',(0,_asyncToGenerator2.default)(function*(){try{var clientSecret=yield provideCheckoutClientSecret();_NativeOnrampSdkModule.default.provideCheckoutClientSecret(clientSecret);}catch(error){_NativeOnrampSdkModule.default.provideCheckoutClientSecret(null);}}));return _NativeOnrampSdkModule.default.performCheckout(onrampSessionId);});return function(_x10,_x11){return _ref11.apply(this,arguments);};}(),[]);var _authorize=(0,_react.useCallback)(function(){var _ref13=(0,_asyncToGenerator2.default)(function*(linkAuthIntentId){return _NativeOnrampSdkModule.default.onrampAuthorize(linkAuthIntentId);});return function(_x12){return _ref13.apply(this,arguments);};}(),[]);var _getCryptoTokenDisplayData=(0,_react.useCallback)(function(){var _ref14=(0,_asyncToGenerator2.default)(function*(token){return _NativeOnrampSdkModule.default.getCryptoTokenDisplayData(token);});return function(_x13){return _ref14.apply(this,arguments);};}(),[]);var _logOut=(0,_react.useCallback)((0,_asyncToGenerator2.default)(function*(){return _NativeOnrampSdkModule.default.logout();}),[]);var _isAuthError=function _isAuthError(error){var stripeErrorCode=error==null?void 0:error.stripeErrorCode;if(stripeErrorCode==null){return false;}var authErrorCodes=['consumer_session_credentials_invalid','consumer_session_expired'];return authErrorCodes.includes(stripeErrorCode);};return{configure:_configure,hasLinkAccount:_hasLinkAccount,registerLinkUser:_registerLinkUser,registerWalletAddress:_registerWalletAddress,attachKycInfo:_attachKycInfo,presentKycInfoVerification:_presentKycInfoVerification,updatePhoneNumber:_updatePhoneNumber,authenticateUser:_authenticateUser,authenticateUserWithToken:_authenticateUserWithToken,verifyIdentity:_verifyIdentity,collectPaymentMethod:_collectPaymentMethod,createCryptoPaymentToken:_createCryptoPaymentToken,performCheckout:_performCheckout,authorize:_authorize,getCryptoTokenDisplayData:_getCryptoTokenDisplayData,logOut:_logOut,isAuthError:_isAuthError};}
//# sourceMappingURL=useOnramp.js.map